/*C12*/SET SCHEMA PUBLIC
drop table if exists articolo cascade 
drop table if exists ordine cascade 
drop table if exists preferiti_utente cascade 
drop table if exists recensione cascade 
drop table if exists utente cascade 
create table articolo (id bigint generated by default as identity (start with 1), descrizione varchar(255), immagini varchar(255) array, prezzo float(53), titolo varchar(255), utente bigint, primary key (id))
create table ordine (id bigint generated by default as identity (start with 1), data_acquisto date, prezzo_finale bigint, acquirente bigint, articolo bigint, recensione_ordine bigint, venditore bigint, primary key (id))
create table preferiti_utente (utente_id bigint not null, articolo_id bigint not null, primary key (utente_id, articolo_id))
create table recensione (id bigint not null, commento varchar(255), rating float(24), autore bigint, destinatario bigint, primary key (id))
create table utente (id bigint generated by default as identity (start with 1), cognome varchar(255), email varchar(255), password varchar(255), username varchar(255), citta_utente varchar(255), numero_civico varchar(255), via_utente varchar(255), is_admin boolean, nome varchar(255), primary key (id))
alter table articolo add constraint FKtdv80up34qmvqrmju8se9xkak foreign key (utente) references utente
alter table ordine add constraint FKgf61gwevo6shdukma69pqvbuw foreign key (acquirente) references utente
alter table ordine add constraint FKc8f6aq6i9pae5d2ly2x3ddxjx foreign key (articolo) references articolo
alter table ordine add constraint FKpoiem73dak3smj0sohxr7d50b foreign key (recensione_ordine) references recensione
alter table ordine add constraint FK6ryppeilec0he5cpprbpe4m4p foreign key (venditore) references utente
alter table preferiti_utente add constraint FKbdt0knq3h517ag3qngd6bgwi0 foreign key (articolo_id) references articolo
alter table preferiti_utente add constraint FKfgm65uhmel23hny42gv5821aw foreign key (utente_id) references utente
alter table recensione add constraint FKca461k82kbwirr4utlgm9tjou foreign key (autore) references utente
alter table recensione add constraint FK1eywo529xwkfowuhyeikj4lhj foreign key (destinatario) references utente
